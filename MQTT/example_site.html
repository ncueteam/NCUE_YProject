<html>
<head>
  <title>MQTT 測試網站</title>
  <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
</head>
<body>
<div class="msg-text"></div>
<script>
  var client = mqtt.connect("ws://test.mosquitto.org:8080")
  client.on('connect', ()=>
    {
        console.log('connected.');
        client.subscribe("NCUEMQTT")
        client.on("message", function (topic, payload) {
        //console.log(payload);
        var msgText = document.getElementsByClassName('msg-text')[0];
        msgText.innerHTML = msgText.innerHTML+payload.toString()+"<br>";
        console.log([topic, payload].join(": "));
        // client.end()
        });

        client.publish("NCUEMQTT", "hello");  
    }
  );
</script>
</body>
</html>
